# LinC2R-30

## ðŸ“– Overview
This dataset is designed for research and evaluation of the **C to Rust translation task**, with a focus on migrating Linux kernel modules.  
Each subfolder contains a small Linux kernel component, including the original C source code and the **Rust header files generated by bindgen**.  
The dataset provides a **reproducible benchmark** for experiments, testing, and improvement of methods and tools for Câ†’Rust translation.

## ðŸ“‚ Dataset Structure
The dataset is organized as follows:
```text
datasets/
â”‚
â”œâ”€â”€ arc4/ # arc4 encryption module
â”œâ”€â”€ base64/ # base64 encoding/decoding
â”œâ”€â”€ blake2s/ # blake2s hash function
â”œâ”€â”€ chacha/ # chacha cipher module
â”œâ”€â”€ checksum/ # generic checksum utilities
â”œâ”€â”€ clzctz/ # bit count/ctz utilities
â”œâ”€â”€ crc32/ # CRC32 checksum
â”œâ”€â”€ debug_lock/ # debug locking module
...
```

- Each folder corresponds to one **Linux kernel submodule**.  
- Inside each folder:
  - `*.c` / `*.h`: Original Linux kernel C source files  
  - `*.rs`: Rust header files generated from C using **bindgen**
 

## ðŸ“Š Metrics
The `metric/` directory contains Python scripts for evaluating translation quality and safety:
```text
metric/
â”‚
â”œâ”€â”€ calculate_CSR.py # Script to calculate Manually Modified Lines (MML) metric
â”œâ”€â”€ safe_ratio.py # Script to calculate Safe Code (SC) metric
```
- **Manually Modified Lines (MML)**  
  - **Definition:** Measures the proportion of lines in the translated code that still require manual modification to compile successfully.  
  - **How itâ€™s computed:**  
    1. We manually fix the translated output until it compiles (ground truth).  
    2. Compare the fixed version against the raw translation line by line.  
    3. MML = (number of differing lines) Ã· (total lines of translated code).  
  - **Interpretation:** A lower MML means less manual effort is needed, indicating higher translation quality.  

- **Safe Code (SC)**  
  - **Definition:** Measures the proportion of lines in the translated code that comply with Rustâ€™s memory safety rules.  
  - **How itâ€™s computed:**  
    - SC = (# of memory-safe lines) Ã· (total lines of translated code).  
  - **Interpretation:** A higher SC indicates better adherence to Rustâ€™s safety guarantees.  

## ðŸ”§ Usage
1. Clone the repository:
   ```bash
   git clone https://github.com/LYC127/LinC2R-30.git
   cd LinC2R-30/datasets
   ```
2. Navigate to a specific module (e.g., arc4/) to access its C source and the corresponding bindgen-generated Rust files.
3. Use the dataset for translation experiments, whether with C2Rust, other tools, or custom approaches for Câ†’Rust migration.
4. Use the scripts in metric/ to evaluate the quality and safety of translated outputs.
   ```bash
   # Calculate Minimum Match Length (MML)
   python metric/calculate_MML.py
  
   # Compute safe translation ratio
   python metric/safe_ratio.py
   ```

## ðŸŽ¯ Research Value
- Provides a **lightweight, modular kernel dataset**, lowering experimental complexity.  
- Enables direct comparison between **original C interfaces** and **Rust mappings**.  
- Serves as a benchmark for studying the **general task of Câ†’Rust translation**.  
- Useful for evaluating or training **LLM-based code translation models** and compiler-assisted migration tools.  

## ðŸ“Œ Notes
- The dataset includes selected small modules from the Linux kernel and follows the Linux kernel open-source license (GPL-2.0).  
- Intended **for research and academic purposes only**, not for production use.  
